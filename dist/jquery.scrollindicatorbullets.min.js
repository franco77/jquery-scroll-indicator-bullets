(function(){"use strict";$.fn.scrollIndicatorBullets=function(t){var e,n,i,l,a,o,r,s,u,c,d,f;return a={scrollDuration:400,touchTitleDelay:500,scrollOffset:50,waypointOffsetDown:window.innerHeight/3,waypointOffsetUp:50},f=$.extend({},a,t),n=this.filter(function(){return $(this).height()>10}),i=n.filter("[id]"),e=$([]),i.length?(c=function(t){return $("body,html").animate({scrollTop:t.offset().top-f.scrollOffset},f.scrollDuration,function(){return l(t)})},o=function(){return""!==$.trim($(this).text())},s=function(t){var e;return e=null,t.on("touchstart.scrollnav",function(t){return e=window.setTimeout(function(){$(t.currentTarget).addClass("show-title")},f.touchTitleDelay)}),t.on("touchend.scrollnav",function(t){return e&&window.clearTimeout(e),$(".show-title").removeClass("show-title")})},r=function(){var t,e;return e=$("<div>").attr("id","scroll-indicator-bullets"),t=$("<ul>").appendTo(e),i.each(function(e,n){var l,a,r,u;return u=$(n),e>0&&(r=$(i.get(e-1)),r.data("nextTargetSection",u),u.data("prevTargetSection",r)),a=$("<a>").attr("href","#"+u.attr("id")),a.addClass("bullet-item-link"),a.data("targetSection",u),u.data("bulletItemLink",a),a.click(function(t){return t.preventDefault(),c($(t.currentTarget).data("targetSection"))}),a.append($("<span>").addClass("bullet-nav-title").text(u.find("h2:not(.pane-title),.subtitle,.title").filter(o).first().text())),a.append($("<i>").addClass("circle")),l=$("<li>"),Modernizr.touch&&s(l),a.appendTo(l),l.appendTo(t)}),$("body").append(e),i.first().data("bulletItemLink").addClass("active")},l=function(t){return $(".bullet-item-link.active").removeClass("active"),t.data("bulletItemLink")?(e=t,t.data("bulletItemLink").addClass("active")):void 0},u=function(){return i.waypoint(function(t){return"down"===t?($(".bullet-item-link.active").removeClass("active"),l($(this.element))):void 0},{offset:f.waypointOffsetDown}),i.slice(1).waypoint(function(t){return"up"===t?($(".bullet-item-link.active").removeClass("active"),l($(this.element))):void 0},{offset:f.waypointOffsetUp}),i.first().waypoint(function(t){return"up"===t?($(".bullet-item-link.active").removeClass("active"),l($(this.element))):void 0},{offset:-5})},d=function(){return e&&e.data("nextTargetSection")?(c(e.data("nextTargetSection")),!0):i.length&&$("html").scrollTop()+$("body").scrollTop()<=10?(c(i.first()),!0):!1},r(),u(),{scrollToNext:d}):void 0}}).call(this);