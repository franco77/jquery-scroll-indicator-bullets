(function(){"use strict";var t;t=jQuery,t.fn.scrollIndicatorBullets=function(e){var n,i,r,a,o,l,u,c,s,d,f,v,p,w;return o={titleSelector:null,scrollDuration:400,touchTitleDelay:500,scrollOffset:50,waypointOffsetDown:window.innerHeight/3,waypointOffsetUp:50,pgKeysEnabled:!0},w=t.extend({},o,e),i=this.filter(function(){return t(this).height()>10}),r=i.filter("[id]"),n=t([]),r.length?(f=function(e){return t("body,html").animate({scrollTop:e.offset().top-w.scrollOffset},w.scrollDuration,function(){return a(e)})},l=function(){return""!==t.trim(t(this).text())},s=function(e){var n;return n=null,e.on("touchstart.scrollnav",function(e){return n=window.setTimeout(function(){t(e.currentTarget).addClass("show-title")},w.touchTitleDelay)}),e.on("touchend.scrollnav",function(e){return n&&window.clearTimeout(n),t(".show-title").removeClass("show-title")})},u=function(){var e,n;return n=t("<div>").attr("id","scroll-indicator-bullets"),e=t("<ul>").appendTo(n),r.each(function(n,i){var a,o,u,c,d;return c=t(i),n>0&&(u=t(r.get(n-1)),u.data("nextTargetSection",c),c.data("prevTargetSection",u)),o=t("<a>").attr("href","#"+c.attr("id")),o.addClass("bullet-item-link"),o.data("targetSection",c),c.data("bulletItemLink",o),o.click(function(e){return e.preventDefault(),f(t(e.currentTarget).data("targetSection"))}),d=c.find(w.titleSelector).filter(l).first().text(),""!==d&&o.append(t("<span>").addClass("bullet-nav-title").text(d)),o.append(t("<i>").addClass("circle")),a=t("<li>"),null!=window.Modernizr&&window.Modernizr.touch&&s(a),o.appendTo(a),a.appendTo(e)}),t("body").append(n),r.first().data("bulletItemLink").addClass("active")},a=function(e){return t(".bullet-item-link.active").removeClass("active"),e.data("bulletItemLink")?(n=e,e.data("bulletItemLink").addClass("active")):void 0},d=function(){return r.waypoint(function(e){return"down"===e?(t(".bullet-item-link.active").removeClass("active"),a(t(this.element))):void 0},{offset:w.waypointOffsetDown}),r.slice(1).waypoint(function(e){return"up"===e?(t(".bullet-item-link.active").removeClass("active"),a(t(this.element))):void 0},{offset:w.waypointOffsetUp}),r.first().waypoint(function(e){return"up"===e?(t(".bullet-item-link.active").removeClass("active"),a(t(this.element))):void 0},{offset:-5})},c=function(){return t(window.document).keydown(function(t){var e;return e=t.keyCode?t.keyCode:t.which,33===e&&p()?t.preventDefault():34===e&&v()?t.preventDefault():void 0})},v=function(){return n&&n.data("nextTargetSection")?(f(n.data("nextTargetSection")),!0):!1},p=function(){return n&&n.data("prevTargetSection")?(f(n.data("prevTargetSection")),!0):!1},u(),d(),w.pgKeysEnabled&&c(),{scrollToNext:v,scrollToPrev:p}):void 0}}).call(this);