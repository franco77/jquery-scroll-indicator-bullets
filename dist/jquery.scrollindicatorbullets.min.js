(function(){"use strict";var t;t=jQuery,t.fn.scrollIndicatorBullets=function(e){var n,i,l,r,a,o,c,u,s,d,f,v;return a={titleSelector:null,scrollDuration:400,touchTitleDelay:500,scrollOffset:50,waypointOffsetDown:window.innerHeight/3,waypointOffsetUp:50},v=t.extend({},a,e),i=this.filter(function(){return t(this).height()>10}),l=i.filter("[id]"),n=t([]),l.length?(d=function(e){return t("body,html").animate({scrollTop:e.offset().top-v.scrollOffset},v.scrollDuration,function(){return r(e)})},o=function(){return""!==t.trim(t(this).text())},u=function(e){var n;return n=null,e.on("touchstart.scrollnav",function(e){return n=window.setTimeout(function(){t(e.currentTarget).addClass("show-title")},v.touchTitleDelay)}),e.on("touchend.scrollnav",function(e){return n&&window.clearTimeout(n),t(".show-title").removeClass("show-title")})},c=function(){var e,n;return n=t("<div>").attr("id","scroll-indicator-bullets"),e=t("<ul>").appendTo(n),l.each(function(n,i){var r,a,c,s,f;return s=t(i),n>0&&(c=t(l.get(n-1)),c.data("nextTargetSection",s),s.data("prevTargetSection",c)),a=t("<a>").attr("href","#"+s.attr("id")),a.addClass("bullet-item-link"),a.data("targetSection",s),s.data("bulletItemLink",a),a.click(function(e){return e.preventDefault(),d(t(e.currentTarget).data("targetSection"))}),f=s.find(v.titleSelector).filter(o).first().text(),""!==f&&a.append(t("<span>").addClass("bullet-nav-title").text(f)),a.append(t("<i>").addClass("circle")),r=t("<li>"),Modernizr.touch&&u(r),a.appendTo(r),r.appendTo(e)}),t("body").append(n),l.first().data("bulletItemLink").addClass("active")},r=function(e){return t(".bullet-item-link.active").removeClass("active"),e.data("bulletItemLink")?(n=e,e.data("bulletItemLink").addClass("active")):void 0},s=function(){return l.waypoint(function(e){return"down"===e?(t(".bullet-item-link.active").removeClass("active"),r(t(this.element))):void 0},{offset:v.waypointOffsetDown}),l.slice(1).waypoint(function(e){return"up"===e?(t(".bullet-item-link.active").removeClass("active"),r(t(this.element))):void 0},{offset:v.waypointOffsetUp}),l.first().waypoint(function(e){return"up"===e?(t(".bullet-item-link.active").removeClass("active"),r(t(this.element))):void 0},{offset:-5})},f=function(){return n&&n.data("nextTargetSection")?(d(n.data("nextTargetSection")),!0):l.length&&t("html").scrollTop()+t("body").scrollTop()<=10?(d(l.first()),!0):!1},c(),s(),{scrollToNext:f}):void 0}}).call(this);